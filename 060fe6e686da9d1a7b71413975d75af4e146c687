SETUP-GUIDE.md
  0afcdcdc7f4aec72 1-197
---
{
  "schema_version": "authorship/3.0.0",
  "git_ai_version": "1.0.22",
  "base_commit_sha": "060fe6e686da9d1a7b71413975d75af4e146c687",
  "prompts": {
    "0afcdcdc7f4aec72": {
      "agent_id": {
        "tool": "claude",
        "id": "68a99117-9e2f-4abe-b2d6-4188bb61ce13",
        "model": "claude-opus-4-5-20251101"
      },
      "human_author": "Amir Barshavit <amir@prompt.security>",
      "messages": [
        {
          "type": "user",
          "text": "Caveat: The messages below were generated by the user while running local commands. DO NOT respond to these messages or otherwise consider them in your response unless the user explicitly asks you to.",
          "timestamp": "2025-12-07T12:03:29.808Z"
        },
        {
          "type": "user",
          "text": "<command-name>/clear</command-name>\n            <command-message>clear</command-message>\n            <command-args></command-args>",
          "timestamp": "2025-12-07T12:03:29.790Z"
        },
        {
          "type": "user",
          "text": "<local-command-stdout></local-command-stdout>",
          "timestamp": "2025-12-07T12:03:29.807Z"
        },
        {
          "type": "user",
          "text": "I want to create markdown file on how to setup it to work on spefic repo",
          "timestamp": "2025-12-07T12:04:16.779Z"
        },
        {
          "type": "assistant",
          "text": "I'll help you create a setup guide for this git-notes-bot. Let me first explore the codebase to understand how it works and what configuration is needed.",
          "timestamp": "2025-12-07T12:04:20.333Z"
        },
        {
          "type": "tool_use",
          "name": "Task",
          "input": {
            "description": "Explore git-notes-bot setup",
            "prompt": "Explore the git-notes-bot codebase to understand:\n1. What this bot does (purpose and functionality)\n2. How to set it up for a specific repository\n3. What configuration files or environment variables are needed\n4. Installation requirements (dependencies, prerequisites)\n5. Any existing documentation or README files\n\nReturn a comprehensive summary of the setup process and configuration options.",
            "subagent_type": "Explore"
          },
          "timestamp": "2025-12-07T12:04:22.837Z"
        },
        {
          "type": "assistant",
          "text": "Now I have a complete understanding of the project. Let me create a focused setup guide markdown file:",
          "timestamp": "2025-12-07T12:05:16.802Z"
        },
        {
          "type": "tool_use",
          "name": "Write",
          "input": {
            "content": "# Git Notes Bot - Repository Setup Guide\n\nThis guide explains how to set up git-notes-bot to work on a specific repository.\n\n## Prerequisites\n\n- GitHub repository with Actions enabled\n- Git 2.7.0 or higher\n- Node.js 18+ (for local development/dashboard generation)\n\n## Quick Setup\n\n### Step 1: Add the GitHub Action Workflow\n\nCreate `.github/workflows/git-notes-comment.yml` in your repository:\n\n```yaml\nname: Post Git Notes to PR\n\non:\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  post-notes:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      pull-requests: write\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0  # Required for full git history\n\n      - name: Fetch git notes\n        run: |\n          git fetch origin 'refs/notes/*:refs/notes/*' || true\n\n      - name: Post Git Notes\n        uses: amir-prompt/git-notes-bot@main\n        with:\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\n### Step 2: Set Up Auto-Push for Git Notes\n\nGit notes don't push automatically with regular `git push`. Run this script in your repository to install a post-push hook:\n\n```bash\ncurl -sSL https://raw.githubusercontent.com/amir-prompt/git-notes-bot/main/setup-auto-push-notes.sh | bash\n```\n\nOr manually add to `.git/hooks/post-push`:\n\n```bash\n#!/bin/bash\ngit push origin refs/notes/commits 2>/dev/null || true\n```\n\n### Step 3: Commit and Push\n\nThat's it! Now when you:\n1. Make commits with Git AI or Cursor (which create git notes automatically)\n2. Push your branch\n3. Open a Pull Request\n\nThe bot will automatically post a formatted comment with AI authorship statistics.\n\n## Configuration Options\n\n| Input | Description | Default |\n|-------|-------------|---------|\n| `github-token` | GitHub token for API access | Required |\n| `notes-ref` | Git notes namespace | `refs/notes/commits` |\n| `update-existing` | Update existing comment instead of creating new | `true` |\n| `add-inline-comments` | Add inline comments on AI-modified files | `false` |\n| `dashboard-url` | Custom dashboard URL | Auto-generated |\n\n### Example with All Options\n\n```yaml\n- name: Post Git Notes\n  uses: amir-prompt/git-notes-bot@main\n  with:\n    github-token: ${{ secrets.GITHUB_TOKEN }}\n    notes-ref: 'refs/notes/commits'\n    update-existing: 'true'\n    add-inline-comments: 'true'\n    dashboard-url: 'https://myorg.github.io/myrepo/ai-dashboard.html'\n```\n\n## Optional: Dashboard Generation\n\nTo generate an HTML dashboard with AI contribution analytics, add a second workflow:\n\nCreate `.github/workflows/generate-dashboard.yml`:\n\n```yaml\nname: Generate AI Dashboard\n\non:\n  push:\n    branches: [main]\n  schedule:\n    - cron: '0 0 * * 0'  # Weekly on Sunday\n  workflow_dispatch:\n\npermissions:\n  contents: write\n\njobs:\n  generate-dashboard:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - name: Fetch all git notes\n        run: |\n          git fetch origin 'refs/notes/*:refs/notes/*' || true\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n\n      - name: Generate dashboard\n        run: |\n          npx ts-node https://raw.githubusercontent.com/amir-prompt/git-notes-bot/main/generate-dashboard.ts\n\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: .\n          publish_branch: gh-pages\n```\n\nThen enable GitHub Pages in your repository settings (Settings → Pages → Source: `gh-pages` branch).\n\n## Manual Git Notes\n\nIf you're not using Git AI or Cursor, you can manually add notes:\n\n```bash\n# Add a note to the current commit\ngit notes add -m '{\"ai_percentage\": 75, \"description\": \"AI helped write this feature\"}'\n\n# Push notes to GitHub\ngit push origin refs/notes/commits\n```\n\n## Troubleshooting\n\n### No comment appears on PR\n\n1. Check that the workflow has `pull-requests: write` permission\n2. Verify the \"Fetch git notes\" step completed successfully\n3. Ensure commits in the PR have git notes attached\n\n### Git notes not syncing\n\nRun the auto-push setup script again:\n```bash\n./setup-auto-push-notes.sh\n```\n\nOr manually push notes:\n```bash\ngit push origin refs/notes/commits\n```\n\n### Different percentages locally vs GitHub\n\nThis happens when notes aren't pushed. Either:\n- Use the auto-push hook (recommended)\n- Remember to push notes after each regular push\n\n## How It Works\n\n1. Git AI/Cursor creates git notes on each commit with AI authorship metadata\n2. When you push, the auto-push hook syncs notes to GitHub\n3. When a PR is opened/updated, the GitHub Action:\n   - Fetches all git notes\n   - Parses AI contribution data from notes\n   - Generates a formatted comment with statistics and visualizations\n   - Posts or updates the PR comment\n\n## Further Reading\n\n- [README.md](./README.md) - Full feature documentation\n- [AI-NOTES-GUIDE.md](./AI-NOTES-GUIDE.md) - Detailed integration guide\n- [DASHBOARD-GUIDE.md](./DASHBOARD-GUIDE.md) - Dashboard documentation\n",
            "file_path": "/Users/amir.barshavit/dev/prompt/git-notes-bot/SETUP-GUIDE.md"
          },
          "timestamp": "2025-12-07T12:05:35.676Z"
        }
      ],
      "total_additions": 197,
      "total_deletions": 0,
      "accepted_lines": 197,
      "overriden_lines": 0
    }
  }
}
