<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Authorship Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }
    
    h1 {
      font-size: 3em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .subtitle {
      font-size: 1.2em;
      opacity: 0.9;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    }
    
    .stat-icon {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    
    .stat-label {
      font-size: 0.9em;
      color: #666;
      margin-bottom: 5px;
    }
    
    .stat-value {
      font-size: 2.5em;
      font-weight: bold;
      color: #667eea;
    }
    
    .chart-container {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .chart-title {
      font-size: 1.5em;
      margin-bottom: 20px;
      color: #333;
      font-weight: 600;
    }
    
    .chart-wrapper {
      position: relative;
      height: 400px;
    }
    
    .chart-wrapper.small {
      height: 300px;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th {
      background: #f8f9fa;
      padding: 12px;
      text-align: left;
      font-weight: 600;
      color: #666;
      border-bottom: 2px solid #dee2e6;
    }
    
    td {
      padding: 12px;
      border-bottom: 1px solid #f0f0f0;
    }
    
    tr:hover {
      background: #f8f9fa;
    }
    
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: 600;
    }
    
    .badge-success {
      background: #d4edda;
      color: #155724;
    }
    
    .badge-warning {
      background: #fff3cd;
      color: #856404;
    }
    
    .badge-info {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    .progress-bar {
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 5px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
    }
    
    footer {
      text-align: center;
      color: white;
      margin-top: 50px;
      padding: 20px;
      opacity: 0.8;
    }
    
    .emoji {
      font-style: normal;
    }
    
    .tooltip-icon {
      display: inline-block;
      margin-left: 8px;
      color: #999;
      cursor: help;
      font-size: 0.85em;
      position: relative;
    }
    
    .tooltip-icon:hover {
      color: #667eea;
    }
    
    .tooltip-text {
      visibility: hidden;
      width: 280px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 8px;
      padding: 12px;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      margin-left: -140px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.85em;
      line-height: 1.4;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    .tooltip-text::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #333 transparent transparent transparent;
    }
    
    .tooltip-icon:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    
    .filters-container {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .filters-title {
      font-size: 1.3em;
      font-weight: 600;
      margin-bottom: 20px;
      color: #333;
    }
    
    .filters-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
    }
    
    .filter-label {
      font-size: 0.9em;
      font-weight: 600;
      color: #666;
      margin-bottom: 8px;
    }
    
    .filter-select {
      padding: 10px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1em;
      background: white;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }
    
    .filter-select:hover {
      border-color: #667eea;
    }
    
    .filter-select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .filter-button {
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.1s ease;
      margin-top: auto;
    }
    
    .filter-button:hover {
      background: #5568d3;
      transform: translateY(-2px);
    }
    
    .filter-button:active {
      transform: translateY(0);
    }
    
    .active-filters {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #e0e0e0;
      font-size: 0.9em;
      color: #666;
    }
    
    .filter-tag {
      display: inline-block;
      padding: 5px 12px;
      margin: 5px 5px 0 0;
      background: #e8eaf6;
      color: #667eea;
      border-radius: 15px;
      font-size: 0.85em;
      font-weight: 600;
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2em;
      }
      
      .grid-2 {
        grid-template-columns: 1fr;
      }
      
      .chart-wrapper {
        height: 300px;
      }
      
      .filters-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ü§ñ AI Authorship Dashboard</h1>
      <p class="subtitle">Repository - AI Code Contribution Analytics</p>
    </header>
    
    <!-- Filters -->
    <div class="filters-container">
      <h2 class="filters-title">üîç Filters</h2>
      <div class="filters-grid">
        <div class="filter-group">
          <label class="filter-label" for="timeFilter">Time Range</label>
          <select id="timeFilter" class="filter-select">
            <option value="all">All Time</option>
            <option value="7">Last 7 Days</option>
            <option value="30">Last 30 Days</option>
            <option value="90">Last 90 Days</option>
            <option value="180">Last 6 Months</option>
            <option value="365">Last Year</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label" for="toolFilter">Tool</label>
          <select id="toolFilter" class="filter-select">
            <option value="all">All Tools</option>
            <option value="claude">claude</option><option value="cursor">cursor</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label" for="modelFilter">AI Model</label>
          <select id="modelFilter" class="filter-select">
            <option value="all">All Models</option>
            <option value="claude-4.5-sonnet-thinking">claude-4.5-sonnet-thinking</option><option value="claude-opus-4-5-20251101">claude-opus-4-5-20251101</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label" for="authorFilter">Author</label>
          <select id="authorFilter" class="filter-select">
            <option value="all">All Authors</option>
            <option value="Amir Barshavit">Amir Barshavit</option>
          </select>
        </div>
        
        <div class="filter-group">
          <button id="applyFilters" class="filter-button">Apply Filters</button>
        </div>
      </div>
      <div id="activeFilters" class="active-filters" style="display: none;">
        <strong>Active Filters:</strong>
        <div id="filterTags"></div>
      </div>
    </div>
    
    <!-- Summary Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üìù</div>
        <div class="stat-label">
          Total Commits
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Total number of commits in the repository history</span>
          </span>
        </div>
        <div class="stat-value" id="statTotalCommits">37</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìÅ</div>
        <div class="stat-label">
          Files Modified
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Unique count of files that have been modified across all commits</span>
          </span>
        </div>
        <div class="stat-value" id="statTotalFiles">51</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">‚ûï</div>
        <div class="stat-label">
          Total Lines
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Sum of all lines added and deleted across all commits (additions + deletions)</span>
          </span>
        </div>
        <div class="stat-value" id="statTotalLines">15,290</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ü§ñ</div>
        <div class="stat-label">
          AI Contribution
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Percentage of total lines that were contributed by AI (AI lines / Total lines √ó 100)</span>
          </span>
        </div>
        <div class="stat-value" id="statAIPercentage">25.5%</div>
      </div>
    </div>
    
    <!-- Main Charts -->
    <div class="chart-container">
      <h2 class="chart-title">
        üìà Commit Activity Over Time
        <span class="tooltip-icon">‚ÑπÔ∏è
          <span class="tooltip-text">Number of commits grouped by date, showing the repository's commit frequency over time</span>
        </span>
      </h2>
      <div class="chart-wrapper">
        <canvas id="timelineChart"></canvas>
      </div>
    </div>
    
    <div class="chart-container">
      <h2 class="chart-title">
        üéØ AI Acceptance Rate Timeline
        <span class="tooltip-icon">‚ÑπÔ∏è
          <span class="tooltip-text">Percentage of AI-contributed lines that were accepted per day (AI lines / Total lines √ó 100)</span>
        </span>
      </h2>
      <div class="chart-wrapper">
        <canvas id="acceptanceChart"></canvas>
      </div>
    </div>
    
    <div class="grid-2">
      <div class="chart-container">
        <h2 class="chart-title">
          üß† Model Usage
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Distribution of commits by AI model used, showing which models contributed most frequently</span>
          </span>
        </h2>
        <div class="chart-wrapper small">
          <canvas id="modelChart"></canvas>
        </div>
      </div>
      
      <div class="chart-container">
        <h2 class="chart-title">
          üîß Tool Distribution
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Distribution of commits by tool used (e.g., Cursor, Claude), showing which development tools were used</span>
          </span>
        </h2>
        <div class="chart-wrapper small">
          <canvas id="toolChart"></canvas>
        </div>
      </div>
    </div>
    
    <div class="grid-2">
      <div class="chart-container">
        <h2 class="chart-title">
          ü§ñ AI vs Human Contribution
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Overall distribution of lines contributed by AI versus human authors across all commits</span>
          </span>
        </h2>
        <div class="chart-wrapper small">
          <canvas id="aiHumanPieChart"></canvas>
        </div>
      </div>
      
      <div class="chart-container">
        <h2 class="chart-title">
          üìä Contribution Summary
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Quick overview of AI and human contribution metrics</span>
          </span>
        </h2>
        <div style="padding: 20px;">
          <div style="margin-bottom: 20px;">
            <div style="font-size: 1.2em; color: #667eea; font-weight: bold;">AI Contribution</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #667eea;" id="summaryAILines">3,906</div>
            <div style="color: #666;" id="summaryAIPercent">lines (25.5%)</div>
          </div>
          <div>
            <div style="font-size: 1.2em; color: #48bb78; font-weight: bold;">Human Contribution</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #48bb78;" id="summaryHumanLines">11,384</div>
            <div style="color: #666;" id="summaryHumanPercent">lines (74.5%)</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="chart-container">
      <h2 class="chart-title">
        üë• AI vs Human Contribution Over Time
        <span class="tooltip-icon">‚ÑπÔ∏è
          <span class="tooltip-text">Timeline showing lines contributed by AI versus human authors per day (based on AI metadata in git notes)</span>
        </span>
      </h2>
      <div class="chart-wrapper small">
        <canvas id="contributionChart"></canvas>
      </div>
    </div>
    
    <!-- Tables -->
    <div class="grid-2">
      <div class="chart-container">
        <h2 class="chart-title">
          üèÜ Top AI Models
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Top 5 AI models by commit count. Acceptance Rate = (AI lines / Total lines) for commits using each model</span>
          </span>
        </h2>
        <table>
          <thead>
            <tr>
              <th>Model</th>
              <th>Commits</th>
              <th>Acceptance Rate</th>
            </tr>
          </thead>
          <tbody>
            
              <tr>
                <td><strong>claude-4.5-sonnet-thinking</strong></td>
                <td>27</td>
                <td>
                  <span class="badge badge-warning">
                    75.0%
                  </span>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 74.95166487647691%"></div>
                  </div>
                </td>
              </tr>
            
              <tr>
                <td><strong>claude-opus-4-5-20251101</strong></td>
                <td>3</td>
                <td>
                  <span class="badge badge-info">
                    26.7%
                  </span>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 26.73076923076923%"></div>
                  </div>
                </td>
              </tr>
            
          </tbody>
        </table>
      </div>
      
      <div class="chart-container">
        <h2 class="chart-title">
          üìÇ Most Modified Files
          <span class="tooltip-icon">‚ÑπÔ∏è
            <span class="tooltip-text">Top 10 files by number of modifications. AI % = (AI lines / Total lines) for each file</span>
          </span>
        </h2>
        <table>
          <thead>
            <tr>
              <th>File</th>
              <th>Changes</th>
              <th>AI %</th>
            </tr>
          </thead>
          <tbody>
            
                <tr>
                  <td title="d3ac4d12e93b00b6"><code>d3ac4d12e93b00b6</code></td>
                  <td>9</td>
                  <td>
                    <span class="badge badge-info">87%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="src/index.ts"><code>index.ts</code></td>
                  <td>7</td>
                  <td>
                    <span class="badge badge-info">71%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="ae16f7e9b721cde0"><code>ae16f7e9b721cde0</code></td>
                  <td>7</td>
                  <td>
                    <span class="badge badge-info">102%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="07845fb9723bbada"><code>07845fb9723bbada</code></td>
                  <td>5</td>
                  <td>
                    <span class="badge badge-info">53%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="3d099ee320fed3f7"><code>3d099ee320fed3f7</code></td>
                  <td>5</td>
                  <td>
                    <span class="badge badge-info">93%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="src/dashboard.ts"><code>dashboard.ts</code></td>
                  <td>4</td>
                  <td>
                    <span class="badge badge-info">53%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="test.txt"><code>test.txt</code></td>
                  <td>4</td>
                  <td>
                    <span class="badge badge-info">94%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="README.md"><code>README.md</code></td>
                  <td>4</td>
                  <td>
                    <span class="badge badge-info">90%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="AI-NOTES-GUIDE.md"><code>AI-NOTES-GUIDE.md</code></td>
                  <td>4</td>
                  <td>
                    <span class="badge badge-info">101%</span>
                  </td>
                </tr>
              
                <tr>
                  <td title="b41a02feee42f05e"><code>b41a02feee42f05e</code></td>
                  <td>4</td>
                  <td>
                    <span class="badge badge-info">99%</span>
                  </td>
                </tr>
              
          </tbody>
        </table>
      </div>
    </div>
    
    
    <div class="chart-container">
      <h2 class="chart-title">
        üë§ Author Statistics
        <span class="tooltip-icon">‚ÑπÔ∏è
          <span class="tooltip-text">Top 10 authors by commit count. AI Usage = (AI lines / Total lines) across all commits by each author</span>
        </span>
      </h2>
      <table>
        <thead>
          <tr>
            <th>Author</th>
            <th>Commits</th>
            <th>Total Lines</th>
            <th>AI Usage</th>
          </tr>
        </thead>
        <tbody id="authorStatsTable">
          
            <tr>
              <td><strong>Amir Barshavit <amir@prompt.security></strong></td>
              <td>30</td>
              <td>6,215</td>
              <td>
                <span class="badge badge-warning">
                  62.8%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 62.84794851166533%"></div>
                </div>
              </td>
            </tr>
          
        </tbody>
      </table>
    </div>
    
    
    <div class="chart-container">
      <h2 class="chart-title">
        ‚è±Ô∏è Recent AI-Assisted Commits
        <span class="tooltip-icon">‚ÑπÔ∏è
          <span class="tooltip-text">Most recent commits with AI metadata. AI % = (AI lines / Total lines) for each commit</span>
        </span>
      </h2>
      <table>
        <thead>
          <tr>
            <th>SHA</th>
            <th>Author</th>
            <th>Message</th>
            <th>AI %</th>
            <th>Model</th>
          </tr>
        </thead>
        <tbody id="recentCommitsTable">
          
            <tr>
              <td><code>add4567</code></td>
              <td>Amir Barshavit</td>
              <td title="add installation script for git-notes-bot setup">add installation script for git-notes-bot setup</td>
              <td>
                <span class="badge badge-success">
                  100%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </td>
              <td><small>claude-opus-4-5-20251101</small></td>
            </tr>
          
            <tr>
              <td><code>e417a3a</code></td>
              <td>Amir Barshavit</td>
              <td title="fix filtring">fix filtring</td>
              <td>
                <span class="badge badge-warning">
                  50%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 50.259515570934255%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>f657e7b</code></td>
              <td>Amir Barshavit</td>
              <td title="fix stat bug">fix stat bug</td>
              <td>
                <span class="badge badge-info">
                  44%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 43.75%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>a0e5d57</code></td>
              <td>Amir Barshavit</td>
              <td title="add tooltips">add tooltips</td>
              <td>
                <span class="badge badge-info">
                  40%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 39.76377952755906%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>fa7e98a</code></td>
              <td>Amir Barshavit</td>
              <td title="fix data">fix data</td>
              <td>
                <span class="badge badge-warning">
                  54%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 53.84615384615385%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>c7285fb</code></td>
              <td>Amir Barshavit</td>
              <td title="add lines">add lines</td>
              <td>
                <span class="badge badge-info">
                  0%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </td>
              <td><small>N/A</small></td>
            </tr>
          
            <tr>
              <td><code>8ee8578</code></td>
              <td>Amir Barshavit</td>
              <td title="aaaaaa">aaaaaa</td>
              <td>
                <span class="badge badge-info">
                  0%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </td>
              <td><small>N/A</small></td>
            </tr>
          
            <tr>
              <td><code>b14ef83</code></td>
              <td>Amir Barshavit</td>
              <td title="test">test</td>
              <td>
                <span class="badge badge-warning">
                  50%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 50%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>2a290b9</code></td>
              <td>Amir Barshavit</td>
              <td title="fff">fff</td>
              <td>
                <span class="badge badge-warning">
                  52%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 51.724137931034484%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>fbe675e</code></td>
              <td>Amir Barshavit</td>
              <td title="test stat">test stat</td>
              <td>
                <span class="badge badge-info">
                  0%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </td>
              <td><small>N/A</small></td>
            </tr>
          
            <tr>
              <td><code>218ef29</code></td>
              <td>Amir Barshavit</td>
              <td title="Fix YAML syntax error in dashboard workflow">Fix YAML syntax error in dashboard workflow</td>
              <td>
                <span class="badge badge-info">
                  0%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>134d2b2</code></td>
              <td>Amir Barshavit</td>
              <td title="blabla|">blabla|</td>
              <td>
                <span class="badge badge-info">
                  38%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 37.5%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>9dba3ea</code></td>
              <td>Amir Barshavit</td>
              <td title="Add dashboard link to AI authorship reports">Add dashboard link to AI authorship reports</td>
              <td>
                <span class="badge badge-success">
                  91%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 91.48936170212765%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>176bebf</code></td>
              <td>Amir Barshavit</td>
              <td title="Add text.txt with poem">Add text.txt with poem</td>
              <td>
                <span class="badge badge-success">
                  100%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>cfa840f</code></td>
              <td>Amir Barshavit</td>
              <td title="add dashbaord">add dashbaord</td>
              <td>
                <span class="badge badge-info">
                  0%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </td>
              <td><small>N/A</small></td>
            </tr>
          
            <tr>
              <td><code>9b5cb14</code></td>
              <td>Amir Barshavit</td>
              <td title="eeeee">eeeee</td>
              <td>
                <span class="badge badge-success">
                  100%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>2c55f4f</code></td>
              <td>Amir Barshavit</td>
              <td title="sdsfasf">sdsfasf</td>
              <td>
                <span class="badge badge-success">
                  100%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>7c39c7a</code></td>
              <td>Amir Barshavit</td>
              <td title="ssss">ssss</td>
              <td>
                <span class="badge badge-success">
                  100%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>0b2b48e</code></td>
              <td>Amir Barshavit</td>
              <td title="fff">fff</td>
              <td>
                <span class="badge badge-success">
                  82%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 82.10526315789474%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
            <tr>
              <td><code>ddb3d1d</code></td>
              <td>Amir Barshavit</td>
              <td title="asdadf">asdadf</td>
              <td>
                <span class="badge badge-success">
                  108%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 107.6923076923077%"></div>
                </div>
              </td>
              <td><small>claude-4.5-sonnet-thinking</small></td>
            </tr>
          
        </tbody>
      </table>
    </div>
    
    <footer>
      <p>Generated by <strong>git-notes-bot</strong> ü§ñ</p>
      <p><small>Last updated: 12/7/2025, 11:42:05 AM</small></p>
    </footer>
  </div>
  
  <script>
    // Chart.js configuration
    Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
    Chart.defaults.color = '#666';
    
    const chartColors = {
      primary: '#667eea',
      secondary: '#764ba2',
      success: '#48bb78',
      warning: '#ed8936',
      danger: '#f56565',
      info: '#4299e1'
    };
    
    // Timeline Chart
    new Chart(document.getElementById('timelineChart'), {
      type: 'line',
      data: {
        labels: ["2025-12-04","2025-12-05","2025-12-07"],
        datasets: [{
          label: 'Commits',
          data: [17,3,15],
          borderColor: chartColors.primary,
          backgroundColor: chartColors.primary + '20',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: true,
            position: 'top'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              precision: 0
            }
          }
        }
      }
    });
    
    // Acceptance Rate Chart
    new Chart(document.getElementById('acceptanceChart'), {
      type: 'line',
      data: {
        labels: ["2025-12-04","2025-12-05","2025-12-07"],
        datasets: [{
          label: 'AI Acceptance Rate (%)',
          data: ["59.3","100.0","11.4"],
          borderColor: chartColors.success,
          backgroundColor: chartColors.success + '20',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: true
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function(value) {
                return value + '%';
              }
            }
          }
        }
      }
    });
    
    // Model Chart
    new Chart(document.getElementById('modelChart'), {
      type: 'doughnut',
      data: {
        labels: ["claude-4.5-sonnet-thinking","claude-opus-4-5-20251101"],
        datasets: [{
          data: [27,3],
          backgroundColor: [
            chartColors.primary,
            chartColors.secondary,
            chartColors.success,
            chartColors.warning,
            chartColors.info
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
    
    // Tool Chart
    new Chart(document.getElementById('toolChart'), {
      type: 'pie',
      data: {
        labels: ["claude","cursor"],
        datasets: [{
          data: [3,27],
          backgroundColor: [
            chartColors.primary,
            chartColors.success,
            chartColors.warning,
            chartColors.info
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
    
    // Contribution Chart
    new Chart(document.getElementById('contributionChart'), {
      type: 'line',
      data: {
        labels: ["2025-12-04","2025-12-05","2025-12-07"],
        datasets: [{
          label: 'AI Lines',
          data: [2194,437,1275],
          borderColor: chartColors.primary,
          backgroundColor: chartColors.primary + '20',
          tension: 0.4,
          fill: false
        }, {
          label: 'Human Lines',
          data: [1505,0,9879],
          borderColor: chartColors.success,
          backgroundColor: chartColors.success + '20',
          tension: 0.4,
          fill: false
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: true,
            position: 'top'
          }
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
    
    // AI vs Human Pie Chart
    new Chart(document.getElementById('aiHumanPieChart'), {
      type: 'pie',
      data: {
        labels: ['AI Contribution', 'Human Contribution'],
        datasets: [{
          data: [3906, 11384],
          backgroundColor: [
            chartColors.primary,
            chartColors.success
          ],
          borderWidth: 2,
          borderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom'
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const label = context.label || '';
                const value = context.parsed || 0;
                const total = 15290;
                const percentage = ((value / total) * 100).toFixed(1);
                return label + ': ' + value.toLocaleString() + ' lines (' + percentage + '%)';
              }
            }
          }
        }
      }
    });
    
    // Store raw data for filtering
    const rawData = {
      commits: [{"sha":"add4567a46763caf58fd42584b697996278da5fa","shortSha":"add4567","date":"2025-12-07T13:41:26+02:00","author":"Amir Barshavit","message":"add installation script for git-notes-bot setup","aiPercent":100,"model":"claude-opus-4-5-20251101","tool":"claude"},{"sha":"e417a3a9e04d0907abeb6614e73d710ddf2ad9e2","shortSha":"e417a3a","date":"2025-12-07T13:28:45+02:00","author":"Amir Barshavit","message":"fix filtring","aiPercent":50.259515570934255,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"f657e7bfb5156ae5cd313ac242be7c0cbdbfe1a0","shortSha":"f657e7b","date":"2025-12-07T11:54:06+02:00","author":"Amir Barshavit","message":"fix stat bug","aiPercent":43.75,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"a0e5d573fc1e4f22f38fe7b8a4b9a31b764da198","shortSha":"a0e5d57","date":"2025-12-07T11:45:38+02:00","author":"Amir Barshavit","message":"add tooltips","aiPercent":39.76377952755906,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"fa7e98aabffd880d8d428ca1dfa8e40cd8a3d76b","shortSha":"fa7e98a","date":"2025-12-07T11:39:48+02:00","author":"Amir Barshavit","message":"fix data","aiPercent":53.84615384615385,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"c7285fbbb242548213ef4ad58dedf20c48fe59c4","shortSha":"c7285fb","date":"2025-12-07T11:32:10+02:00","author":"Amir Barshavit","message":"add lines","aiPercent":0},{"sha":"8ee85785d70fce0341ca5d9654790481ca9ba8c4","shortSha":"8ee8578","date":"2025-12-07T11:30:06+02:00","author":"Amir Barshavit","message":"aaaaaa","aiPercent":0},{"sha":"b14ef83bdc8ac5a718f056ba617c93e0a2b2bb07","shortSha":"b14ef83","date":"2025-12-07T11:27:17+02:00","author":"Amir Barshavit","message":"test","aiPercent":50,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"2a290b900a50ad9302e62e8d56b86b24bae07d1a","shortSha":"2a290b9","date":"2025-12-07T11:15:23+02:00","author":"Amir Barshavit","message":"fff","aiPercent":51.724137931034484,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"fbe675e86a4acb80a96b0fdc3fb2578ca65e94c7","shortSha":"fbe675e","date":"2025-12-07T11:08:02+02:00","author":"Amir Barshavit","message":"test stat","aiPercent":0},{"sha":"218ef29e3e0c38326577272cd044d91136eea076","shortSha":"218ef29","date":"2025-12-07T11:03:30+02:00","author":"Amir Barshavit","message":"Fix YAML syntax error in dashboard workflow","aiPercent":0,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"134d2b22bb4507df4df779f2ce2aafa3cb33602f","shortSha":"134d2b2","date":"2025-12-07T10:56:12+02:00","author":"Amir Barshavit","message":"blabla|","aiPercent":37.5,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"9dba3ea4f341be52d7e53f9136c2bd9597fefd82","shortSha":"9dba3ea","date":"2025-12-07T10:36:05+02:00","author":"Amir Barshavit","message":"Add dashboard link to AI authorship reports","aiPercent":91.48936170212765,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"176bebf6b01ac99691203e9a4c77e1f025bfef28","shortSha":"176bebf","date":"2025-12-07T10:31:43+02:00","author":"Amir Barshavit","message":"Add text.txt with poem","aiPercent":100,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"cfa840fdc6bdb8e86881bd1d41202f8e639a898c","shortSha":"cfa840f","date":"2025-12-07T10:24:34+02:00","author":"Amir Barshavit","message":"add dashbaord","aiPercent":0},{"sha":"9b5cb146f26c93bef869f73b902c5f0c76368d43","shortSha":"9b5cb14","date":"2025-12-05T00:09:38+02:00","author":"Amir Barshavit","message":"eeeee","aiPercent":100,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"2c55f4f471eec4804de9679937a9a5c116fe4660","shortSha":"2c55f4f","date":"2025-12-05T00:06:00+02:00","author":"Amir Barshavit","message":"sdsfasf","aiPercent":100,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"7c39c7aa04045a7774d2ab99f22e9827af933207","shortSha":"7c39c7a","date":"2025-12-05T00:02:07+02:00","author":"Amir Barshavit","message":"ssss","aiPercent":100,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"0b2b48e3e44f638d0720a53ce54f5568544e80d9","shortSha":"0b2b48e","date":"2025-12-04T23:59:18+02:00","author":"Amir Barshavit","message":"fff","aiPercent":82.10526315789474,"model":"claude-4.5-sonnet-thinking","tool":"cursor"},{"sha":"ddb3d1de184cfdc27b75c827538536b844d2f8d1","shortSha":"ddb3d1d","date":"2025-12-04T23:49:09+02:00","author":"Amir Barshavit","message":"asdadf","aiPercent":107.6923076923077,"model":"claude-4.5-sonnet-thinking","tool":"cursor"}],
      commitsByDate: [{"date":"2025-12-04","count":17,"aiLines":2194,"totalLines":3699,"aiPercent":59.313327926466606},{"date":"2025-12-05","count":3,"aiLines":437,"totalLines":437,"aiPercent":100},{"date":"2025-12-07","count":15,"aiLines":1275,"totalLines":11154,"aiPercent":11.4308768154922}],
      models: [{"model":"claude-4.5-sonnet-thinking","commits":27,"lines":4655,"acceptedLines":3489,"acceptanceRate":74.95166487647691},{"model":"claude-opus-4-5-20251101","commits":3,"lines":1560,"acceptedLines":417,"acceptanceRate":26.73076923076923}],
      tools: [{"tool":"cursor","commits":27,"lines":4655},{"tool":"claude","commits":3,"lines":1560}],
      authors: [{"author":"Amir Barshavit <amir@prompt.security>","commits":30,"totalLines":6215,"aiAssistedLines":3906,"aiUsagePercent":62.84794851166533}],
      files: [{"filepath":"d3ac4d12e93b00b6","modifications":9,"aiLines":577,"totalLines":662,"lastModified":"2025-12-04T23:59:18+02:00"},{"filepath":"src/index.ts","modifications":7,"aiLines":254.38636363636363,"totalLines":357.94696969696975,"lastModified":"2025-12-04T16:58:46+02:00"},{"filepath":"ae16f7e9b721cde0","modifications":7,"aiLines":272.5454545454545,"totalLines":268.4545454545455,"lastModified":"2025-12-04T23:44:04+02:00"},{"filepath":"07845fb9723bbada","modifications":5,"aiLines":30.999999999999996,"totalLines":58.49999999999999,"lastModified":"2025-12-07T11:15:23+02:00"},{"filepath":"3d099ee320fed3f7","modifications":5,"aiLines":53,"totalLines":57,"lastModified":"2025-12-07T10:31:43+02:00"},{"filepath":"src/dashboard.ts","modifications":4,"aiLines":31.083333333333332,"totalLines":59.166666666666664,"lastModified":"2025-12-07T11:15:23+02:00"},{"filepath":"test.txt","modifications":4,"aiLines":38.5,"totalLines":41,"lastModified":"2025-12-04T16:43:06+02:00"},{"filepath":"README.md","modifications":4,"aiLines":148.80303030303028,"totalLines":165.53030303030303,"lastModified":"2025-12-04T16:39:44+02:00"},{"filepath":"AI-NOTES-GUIDE.md","modifications":4,"aiLines":143.3030303030303,"totalLines":142.03030303030306,"lastModified":"2025-12-04T16:53:07+02:00"},{"filepath":"b41a02feee42f05e","modifications":4,"aiLines":42.5,"totalLines":43,"lastModified":"2025-12-04T17:28:22+02:00"},{"filepath":"src/dashboard-html.ts","modifications":3,"aiLines":168.45,"totalLines":362.2,"lastModified":"2025-12-07T11:45:38+02:00"},{"filepath":"action.yml","modifications":3,"aiLines":146.38636363636363,"totalLines":164.11363636363637,"lastModified":"2025-12-04T23:44:04+02:00"},{"filepath":"setup-auto-push-notes.sh","modifications":3,"aiLines":46.916666666666664,"totalLines":46.666666666666664,"lastModified":"2025-12-04T19:56:48+02:00"},{"filepath":"add-ai-note.sh","modifications":3,"aiLines":93.25,"totalLines":93,"lastModified":"2025-12-04T16:53:07+02:00"},{"filepath":"88f63ed45eff3364","modifications":3,"aiLines":84,"totalLines":146.5,"lastModified":"2025-12-04T16:58:46+02:00"},{"filepath":"5e655ac08cfe792d","modifications":2,"aiLines":3.5,"totalLines":8,"lastModified":"2025-12-07T11:54:06+02:00"},{"filepath":"a27fa58cc9be8bb3","modifications":2,"aiLines":115.27272727272727,"totalLines":114.72727272727273,"lastModified":"2025-12-04T23:44:04+02:00"},{"filepath":"f1cacab3a6a75486","modifications":2,"aiLines":40.5,"totalLines":42,"lastModified":"2025-12-04T20:05:28+02:00"},{"filepath":"8155a6a363a0a455","modifications":2,"aiLines":118,"totalLines":118,"lastModified":"2025-12-04T16:53:07+02:00"},{"filepath":"6e330eb5c1a083c9","modifications":2,"aiLines":1,"totalLines":572.5,"lastModified":"2025-12-04T16:01:26+02:00"},{"filepath":"install.sh","modifications":1,"aiLines":207.5,"totalLines":207.5,"lastModified":"2025-12-07T13:41:26+02:00"},{"filepath":"6adaf235d2d4ee04","modifications":1,"aiLines":207.5,"totalLines":207.5,"lastModified":"2025-12-07T13:41:26+02:00"},{"filepath":"ac04f0ff6fb37089","modifications":1,"aiLines":116.2,"totalLines":231.2,"lastModified":"2025-12-07T13:28:45+02:00"},{"filepath":"55f322c1a322216b","modifications":1,"aiLines":116.2,"totalLines":231.2,"lastModified":"2025-12-07T13:28:45+02:00"},{"filepath":"e4bf386fe249ce9d","modifications":1,"aiLines":116.2,"totalLines":231.2,"lastModified":"2025-12-07T13:28:45+02:00"},{"filepath":"e18f3f684122dfc0","modifications":1,"aiLines":116.2,"totalLines":231.2,"lastModified":"2025-12-07T13:28:45+02:00"},{"filepath":"5f5672ae3ded3fde","modifications":1,"aiLines":50.5,"totalLines":127,"lastModified":"2025-12-07T11:45:38+02:00"},{"filepath":"generate-dashboard.ts","modifications":1,"aiLines":0.8333333333333334,"totalLines":1.6666666666666667,"lastModified":"2025-12-07T11:27:17+02:00"},{"filepath":"generate-dashboard.sh","modifications":1,"aiLines":0.8333333333333334,"totalLines":1.6666666666666667,"lastModified":"2025-12-07T11:27:17+02:00"},{"filepath":"5129a266849522be","modifications":1,"aiLines":1.5,"totalLines":4,"lastModified":"2025-12-07T10:56:12+02:00"},{"filepath":".github/workflows/generate-dashboard.yml","modifications":1,"aiLines":10.75,"totalLines":11.75,"lastModified":"2025-12-07T10:36:05+02:00"},{"filepath":".github/workflows/pr-dashboard-link.yml","modifications":1,"aiLines":10.75,"totalLines":11.75,"lastModified":"2025-12-07T10:36:05+02:00"},{"filepath":"text.txt","modifications":1,"aiLines":10,"totalLines":10,"lastModified":"2025-12-07T10:31:43+02:00"},{"filepath":"6add4fc2c5fa6ed0","modifications":1,"aiLines":16,"totalLines":16,"lastModified":"2025-12-05T00:09:38+02:00"},{"filepath":"push-notes-now.sh","modifications":1,"aiLines":46.75,"totalLines":46.75,"lastModified":"2025-12-05T00:06:00+02:00"},{"filepath":".github/workflows/git-notes-comment.yml","modifications":1,"aiLines":46.75,"totalLines":46.75,"lastModified":"2025-12-05T00:06:00+02:00"},{"filepath":"FIX-APPLIED.md","modifications":1,"aiLines":46.75,"totalLines":46.75,"lastModified":"2025-12-05T00:06:00+02:00"},{"filepath":"QUICK-FIX.md","modifications":1,"aiLines":46.75,"totalLines":46.75,"lastModified":"2025-12-05T00:06:00+02:00"},{"filepath":"git-bot-info.txt","modifications":1,"aiLines":15.5,"totalLines":15.5,"lastModified":"2025-12-05T00:02:07+02:00"},{"filepath":"b0e3659bf211801f","modifications":1,"aiLines":15.5,"totalLines":15.5,"lastModified":"2025-12-05T00:02:07+02:00"},{"filepath":"INLINE-COMMENTS.md","modifications":1,"aiLines":78,"totalLines":95,"lastModified":"2025-12-04T23:59:18+02:00"},{"filepath":"IMPLEMENTATION-SUMMARY.md","modifications":1,"aiLines":78,"totalLines":95,"lastModified":"2025-12-04T23:59:18+02:00"},{"filepath":"dist/index.js","modifications":1,"aiLines":57.63636363636363,"totalLines":57.36363636363637,"lastModified":"2025-12-04T23:44:04+02:00"},{"filepath":"19c18ffd94ba5046","modifications":1,"aiLines":24,"totalLines":47.333333333333336,"lastModified":"2025-12-04T23:37:27+02:00"},{"filepath":"d0ca3b06e428793e","modifications":1,"aiLines":24,"totalLines":47.333333333333336,"lastModified":"2025-12-04T23:37:27+02:00"},{"filepath":"amir.txt","modifications":1,"aiLines":5,"totalLines":5.5,"lastModified":"2025-12-04T20:06:51+02:00"},{"filepath":"435f67c15803c545","modifications":1,"aiLines":5,"totalLines":5.5,"lastModified":"2025-12-04T20:06:51+02:00"},{"filepath":"test_new.txt","modifications":1,"aiLines":4.5,"totalLines":5,"lastModified":"2025-12-04T17:28:22+02:00"},{"filepath":"681ea6b50943c1a9","modifications":1,"aiLines":12.5,"totalLines":12.5,"lastModified":"2025-12-04T16:55:15+02:00"},{"filepath":"9c5ded02620b9558","modifications":1,"aiLines":8.5,"totalLines":8.5,"lastModified":"2025-12-04T16:43:06+02:00"},{"filepath":".gitignore","modifications":1,"aiLines":0.5,"totalLines":572,"lastModified":"2025-12-04T16:01:26+02:00"}],
      totalCommits: 37,
      totalFiles: 51,
      totalLines: 15290,
      aiLines: 3906,
      humanLines: 11384,
      aiPercentage: 25.5461085676913
    };
    
    // Store chart instances
    let charts = {
      timeline: null,
      acceptance: null,
      model: null,
      tool: null,
      contribution: null,
      aiHumanPie: null
    };
    
    // Initialize charts (already created above)
    charts.timeline = Chart.getChart('timelineChart');
    charts.acceptance = Chart.getChart('acceptanceChart');
    charts.model = Chart.getChart('modelChart');
    charts.tool = Chart.getChart('toolChart');
    charts.contribution = Chart.getChart('contributionChart');
    charts.aiHumanPie = Chart.getChart('aiHumanPieChart');
    
    // Filter data function
    function filterData(timeFilter, toolFilter, modelFilter, authorFilter) {
      let filtered = { ...rawData };
      let filteredCommits = [...rawData.commits];
      
      // Apply time filter
      if (timeFilter !== 'all') {
        const days = parseInt(timeFilter);
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - days);
        const cutoffStr = cutoffDate.toISOString().split('T')[0];
        
        filteredCommits = filteredCommits.filter(c => c.date.split('T')[0] >= cutoffStr);
      }
      
      // Apply tool filter
      if (toolFilter !== 'all') {
        filteredCommits = filteredCommits.filter(c => c.tool === toolFilter);
        filtered.tools = rawData.tools.filter(t => t.tool === toolFilter);
      }
      
      // Apply model filter
      if (modelFilter !== 'all') {
        filteredCommits = filteredCommits.filter(c => c.model === modelFilter);
        filtered.models = rawData.models.filter(m => m.model === modelFilter);
      }
      
      // Apply author filter
      if (authorFilter !== 'all') {
        filteredCommits = filteredCommits.filter(c => c.author === authorFilter);
      }
      
      filtered.commits = filteredCommits;
      
      // Rebuild commitsByDate from filtered commits
      const dateMap = new Map();
      for (const commit of filteredCommits) {
        const dateStr = commit.date.split('T')[0];
        if (!dateMap.has(dateStr)) {
          dateMap.set(dateStr, {
            date: dateStr,
            count: 0,
            aiLines: 0,
            totalLines: 0,
            aiPercent: 0
          });
        }
        const dateData = dateMap.get(dateStr);
        
        // Find the original commit data to get line counts
        const originalDateData = rawData.commitsByDate.find(d => d.date === dateStr);
        if (originalDateData) {
          // Approximate: distribute lines evenly across commits in that date
          const commitsInDate = rawData.commits.filter(c => c.date.split('T')[0] === dateStr).length;
          const linesPerCommit = originalDateData.totalLines / commitsInDate;
          const aiLinesPerCommit = originalDateData.aiLines / commitsInDate;
          
          dateData.count++;
          dateData.totalLines += linesPerCommit;
          dateData.aiLines += aiLinesPerCommit;
        }
      }
      
      // Calculate AI percentages for each date
      for (const dateData of dateMap.values()) {
        dateData.aiPercent = dateData.totalLines > 0 
          ? (dateData.aiLines / dateData.totalLines) * 100 
          : 0;
      }
      
      filtered.commitsByDate = Array.from(dateMap.values()).sort((a, b) => a.date.localeCompare(b.date));
      
      // Recalculate totals from filtered date data
      filtered.totalCommits = filtered.commits.length;
      filtered.totalLines = Math.round(filtered.commitsByDate.reduce((sum, d) => sum + d.totalLines, 0));
      filtered.aiLines = Math.round(filtered.commitsByDate.reduce((sum, d) => sum + d.aiLines, 0));
      filtered.humanLines = filtered.totalLines - filtered.aiLines;
      filtered.aiPercentage = filtered.totalLines > 0 ? (filtered.aiLines / filtered.totalLines) * 100 : 0;
      
      // Recalculate file count from filtered commits
      const filesSet = new Set();
      for (const file of rawData.files) {
        // Include files that appear in our filtered commits
        filesSet.add(file.filepath);
      }
      filtered.totalFiles = filesSet.size;
      
      // Rebuild author statistics from filtered commits
      const authorMap = new Map();
      for (const commit of filteredCommits) {
        // Find the corresponding date data to get line counts
        const dateStr = commit.date.split('T')[0];
        const originalDateData = rawData.commitsByDate.find(d => d.date === dateStr);
        
        if (originalDateData) {
          const commitsInDate = rawData.commits.filter(c => c.date.split('T')[0] === dateStr).length;
          const linesPerCommit = originalDateData.totalLines / commitsInDate;
          const aiLinesPerCommit = originalDateData.aiLines / commitsInDate;
          
          // Find matching author in rawData to get full author string with email
          const fullAuthor = rawData.authors.find(a => a.author.startsWith(commit.author));
          const authorKey = fullAuthor ? fullAuthor.author : commit.author;
          
          if (!authorMap.has(authorKey)) {
            authorMap.set(authorKey, {
              author: authorKey,
              commits: 0,
              totalLines: 0,
              aiAssistedLines: 0,
              aiUsagePercent: 0
            });
          }
          
          const authorData = authorMap.get(authorKey);
          authorData.commits++;
          authorData.totalLines += linesPerCommit;
          authorData.aiAssistedLines += aiLinesPerCommit;
        }
      }
      
      // Calculate AI usage percentages for each author
      for (const authorData of authorMap.values()) {
        authorData.aiUsagePercent = authorData.totalLines > 0 
          ? (authorData.aiAssistedLines / authorData.totalLines) * 100 
          : 0;
      }
      
      filtered.authors = Array.from(authorMap.values()).sort((a, b) => b.commits - a.commits);
      
      return filtered;
    }
    
    // Update dashboard function
    function updateDashboard(filtered) {
      // Update stats
      document.getElementById('statTotalCommits').textContent = filtered.totalCommits;
      document.getElementById('statTotalFiles').textContent = filtered.totalFiles;
      document.getElementById('statTotalLines').textContent = filtered.totalLines.toLocaleString();
      document.getElementById('statAIPercentage').textContent = filtered.aiPercentage.toFixed(1) + '%';
      
      // Update summary cards
      document.getElementById('summaryAILines').textContent = filtered.aiLines.toLocaleString();
      document.getElementById('summaryAIPercent').textContent = 'lines (' + filtered.aiPercentage.toFixed(1) + '%)';
      document.getElementById('summaryHumanLines').textContent = filtered.humanLines.toLocaleString();
      document.getElementById('summaryHumanPercent').textContent = 'lines (' + (100 - filtered.aiPercentage).toFixed(1) + '%)';
      
      // Update timeline chart
      const timelineLabels = filtered.commitsByDate.map(d => d.date);
      const timelineData = filtered.commitsByDate.map(d => d.count);
      charts.timeline.data.labels = timelineLabels;
      charts.timeline.data.datasets[0].data = timelineData;
      charts.timeline.update();
      
      // Update acceptance rate chart
      const aiPercentData = filtered.commitsByDate.map(d => d.aiPercent.toFixed(1));
      charts.acceptance.data.labels = timelineLabels;
      charts.acceptance.data.datasets[0].data = aiPercentData;
      charts.acceptance.update();
      
      // Update contribution chart
      const aiLinesData = filtered.commitsByDate.map(d => d.aiLines);
      const humanLinesData = filtered.commitsByDate.map(d => d.totalLines - d.aiLines);
      charts.contribution.data.labels = timelineLabels;
      charts.contribution.data.datasets[0].data = aiLinesData;
      charts.contribution.data.datasets[1].data = humanLinesData;
      charts.contribution.update();
      
      // Update model chart
      const topModels = filtered.models.sort((a, b) => b.commits - a.commits).slice(0, 5);
      charts.model.data.labels = topModels.map(m => m.model);
      charts.model.data.datasets[0].data = topModels.map(m => m.commits);
      charts.model.update();
      
      // Update tool chart
      charts.tool.data.labels = filtered.tools.map(t => t.tool);
      charts.tool.data.datasets[0].data = filtered.tools.map(t => t.commits);
      charts.tool.update();
      
      // Update AI vs Human pie chart
      charts.aiHumanPie.data.datasets[0].data = [filtered.aiLines, filtered.humanLines];
      charts.aiHumanPie.update();
      
      // Update Recent AI-Assisted Commits table
      const recentCommitsTable = document.getElementById('recentCommitsTable');
      if (recentCommitsTable) {
        recentCommitsTable.innerHTML = filtered.commits.map(c => {
          const badgeClass = c.aiPercent >= 80 ? 'badge-success' : c.aiPercent >= 50 ? 'badge-warning' : 'badge-info';
          const messageShort = c.message.substring(0, 50) + (c.message.length > 50 ? '...' : '');
          return `
            <tr>
              <td><code>${c.shortSha}</code></td>
              <td>${c.author}</td>
              <td title="${c.message}">${messageShort}</td>
              <td>
                <span class="badge ${badgeClass}">
                  ${c.aiPercent.toFixed(0)}%
                </span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: ${c.aiPercent}%"></div>
                </div>
              </td>
              <td><small>${c.model || 'N/A'}</small></td>
            </tr>
          `;
        }).join('');
      }
      
      // Update Author Statistics table
      const authorStatsTable = document.getElementById('authorStatsTable');
      console.log('Updating author stats:', filtered.authors);
      if (authorStatsTable) {
        if (filtered.authors && filtered.authors.length > 0) {
          authorStatsTable.innerHTML = filtered.authors.map(a => {
            const badgeClass = a.aiUsagePercent >= 70 ? 'badge-success' : a.aiUsagePercent >= 40 ? 'badge-warning' : 'badge-info';
            return `
              <tr>
                <td><strong>${a.author}</strong></td>
                <td>${a.commits}</td>
                <td>${Math.round(a.totalLines).toLocaleString()}</td>
                <td>
                  <span class="badge ${badgeClass}">
                    ${a.aiUsagePercent.toFixed(1)}%
                  </span>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: ${a.aiUsagePercent}%"></div>
                  </div>
                </td>
              </tr>
            `;
          }).join('');
        } else {
          authorStatsTable.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 20px;">No authors found for selected filters</td></tr>';
        }
      }
    }
    
    // Filter button handler
    const applyFiltersBtn = document.getElementById('applyFilters');
    const activeFiltersDiv = document.getElementById('activeFilters');
    const filterTagsDiv = document.getElementById('filterTags');
    
    applyFiltersBtn.addEventListener('click', function() {
      const timeFilter = document.getElementById('timeFilter').value;
      const toolFilter = document.getElementById('toolFilter').value;
      const modelFilter = document.getElementById('modelFilter').value;
      const authorFilter = document.getElementById('authorFilter').value;
      
      const filterTags = [];
      if (timeFilter !== 'all') {
        filterTags.push('Time: Last ' + timeFilter + ' days');
      }
      if (toolFilter !== 'all') {
        filterTags.push('Tool: ' + toolFilter);
      }
      if (modelFilter !== 'all') {
        filterTags.push('Model: ' + modelFilter);
      }
      if (authorFilter !== 'all') {
        filterTags.push('Author: ' + authorFilter);
      }
      
      if (filterTags.length > 0) {
        filterTagsDiv.innerHTML = filterTags.map(tag => 
          '<span class="filter-tag">' + tag + '</span>'
        ).join('');
        activeFiltersDiv.style.display = 'block';
      } else {
        activeFiltersDiv.style.display = 'none';
      }
      
      // Apply filters and update dashboard
      const filtered = filterData(timeFilter, toolFilter, modelFilter, authorFilter);
      updateDashboard(filtered);
    });
  </script>
</body>
</html>